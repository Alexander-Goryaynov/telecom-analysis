<div *ngIf="analysisResult !== undefined" class="w-100">
  <div class="results-title text-center text-white font-weight-bold">
    Результаты анализа данных
  </div>
  <div class="bg-white space-between-paragraphs">
    <p class="font-weight-bold ml-2 pt-2">
      Рыночная капитализация компаний-поставщиков (млрд. долларов США)
    </p>

    <table class="table table-bordered table-hover">
      <tbody>
      <tr>
        <td>
          Максимум
        </td>
        <td>
          {{analysisResult.marketCap.max.value | number: '1.2-2'}}
        </td>
        <td>
          {{analysisResult.marketCap.max.companyName}}
        </td>
      </tr>
      <tr>
        <td>
          Минимум
        </td>
        <td>
          {{analysisResult.marketCap.min.value | number: '1.2-2'}}
        </td>
        <td>
          {{analysisResult.marketCap.min.companyName}}
        </td>
      </tr>
      <tr>
        <td>
          Медиана
        </td>
        <td>
          {{analysisResult.marketCap.median.value | number: '1.2-2'}}
        </td>
        <td>
          {{analysisResult.marketCap.median.companyName }}
        </td>
      </tr>
      <tr>
        <td>
          Среднее
        </td>
        <td>
          {{analysisResult.marketCap.avg | number: '1.2-2'}}
        </td>
        <td>
        </td>
      </tr>
      </tbody>
    </table>
  </div>

  <div class="bg-white space-between-paragraphs">
    <p class="font-weight-bold ml-2 pt-2">
      Курс акций компаний-поставщиков (долларов США)
    </p>
    <table class="table table-bordered border-dark table-hover">
      <tbody>
      <tr>
        <td>
          Максимум
        </td>
        <td>
          {{analysisResult.stockPrice.max.value | number: '1.2-2'}}
        </td>
        <td>
          {{analysisResult.stockPrice.max.companyName}}
        </td>
      </tr>
      <tr>
        <td>
          Минимум
        </td>
        <td>
          {{analysisResult.stockPrice.min.value | number: '1.2-2'}}
        </td>
        <td>
          {{analysisResult.stockPrice.min.companyName}}
        </td>
      </tr>
      <tr>
        <td>
          Медиана
        </td>
        <td>
          {{analysisResult.stockPrice.median.value | number: '1.2-2'}}
        </td>
        <td>
          {{analysisResult.stockPrice.median.companyName}}
        </td>
      </tr>
      <tr>
        <td>
          Среднее
        </td>
        <td>
          {{analysisResult.stockPrice.avg | number: '1.2-2'}}
        </td>
        <td>
        </td>
      </tr>
      </tbody>
    </table>
  </div>

  <div class="bg-white space-between-paragraphs">
    <p class="font-weight-bold ml-2 pt-2">
      Изменение курса акций за последние 24 часа (в процентах)
    </p>
    <p class="font-weight-bold ml-2 pt-2">
      Прирост:
    </p>
    <table class="table table-bordered border-dark table-hover">
      <tbody>
      <tr>
        <td>
          Максимальный
        </td>
        <td>
          +{{analysisResult.dailyLossGain.gain.max.value | number: '1.2-2'}}
        </td>
        <td>
          {{analysisResult.dailyLossGain.gain.max.companyName}}
        </td>
      </tr>
      <tr>
        <td>
          Средний
        </td>
        <td>
          +{{analysisResult.dailyLossGain.gain.avg | number: '1.2-2'}}
        </td>
        <td>
        </td>
      </tr>
      </tbody>
    </table>
    <p class="font-weight-bold ml-2 pt-2">
      Убыток:
    </p>
    <table class="table table-bordered border-dark table-hover">
      <tbody>
      <tr>
        <td>
          Максимальный
        </td>
        <td>
          {{analysisResult.dailyLossGain.loss.max.value | number: '1.2-2'}}
        </td>
        <td>
          {{analysisResult.dailyLossGain.loss.max.companyName}}
        </td>
      </tr>
      <tr>
        <td>
          Средний
        </td>
        <td>
          {{analysisResult.dailyLossGain.loss.avg | number: '1.2-2'}}
        </td>
        <td>
        </td>
      </tr>
      </tbody>
    </table>
  </div>

  <canvas baseChart class="bg-white space-between-paragraphs"
          [datasets]="countByCountryDataset"
          [labels]="countByCountryLabels"
          [chartType]="'bar'"
          [options]="histogramOptions">
  </canvas>

  <canvas baseChart class="bg-white space-between-paragraphs"
          [data]="capByCountryDataset"
          [labels]="capByCountryLabels"
          [chartType]="'pie'"
          [legend]="true"
          [options]="pieChartOptions">
  </canvas>

  <div class="bg-white space-between-paragraphs">
    <p class="font-weight-bold ml-2 pt-2">
      Результаты кластеризации
    </p>
    <div class="d-flex justify-content-center">
      <div>
        <img src="{{analysisResult.clusterizationResult.plotBase64}}"/>
        <div class="mb-3 text-center badge-primary badge-pill text-white w-25">
          Инерция: {{analysisResult.clusterizationResult.inertiaValue | number: '1.2-2'}}
        </div>
      </div>
    </div>
  </div>

  <div class="text-center space-between-paragraphs">
    <button class="btn btn-warning" (click)="onNewAnalysisBtnClick()">
      Загрузить новые данные
    </button>
  </div>
</div>
